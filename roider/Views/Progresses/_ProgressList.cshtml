@model System.Collections.Generic.List<roider.Models.Progresses>

@{
    ViewBag.Title = "Lessons";
    Layout = "_Layout";
}

@* <h2>Lessons</h2> *@
@* <a class="btn btn-success" asp-action="Create">Create Lesson</a> *@
@* *@
@* <!-- Search Box --> *@
@* <div class="input-group mb-3"> *@
@*     <input type="text" class="form-control" id="searchInput" placeholder="Search lessons"> *@
@*     <div class="input-group-append"> *@
@*         <button class="btn btn-outline-secondary" type="button" id="searchButton">Search</button> *@
@*     </div> *@
@* </div> *@

<table class="table" id="lessonsTable">
    @* <thead> *@
    @*     <tr> *@
    @*         <th>Progress ID</th> *@
    @*         <th>Student Name</th> *@
    @*         <th>Lesson Title</th> *@
    @*         <th>Course Name</th> *@
    @*         <th>Actions</th> *@
    @*     </tr> *@
    @* </thead> *@
    <tbody>
        @foreach (var progress in Model)
        {
            <tr>
                <td>@progress.ProgressId</td>
                <td>@progress.Student.StudentName</td>
                <td>@progress.Lesson.LessonTitle</td>
                <td>@progress.Course.CourseTitle</td>
                <td>
                    <a class="btn btn-primary" asp-action="Edit" asp-route-id="@progress.ProgressId">Edit</a>
                    <a class="btn btn-danger" asp-action="Delete" asp-route-id="@progress.ProgressId">Delete</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    document.getElementById('searchButton').addEventListener('click', function() {
        const searchInput = document.getElementById('searchInput').value;
        const tableBody = document.querySelector('#lessonsTable tbody');

        fetch(`/Lessons/SearchLessons?searchTerm=${encodeURIComponent(searchInput)}`)
            .then(response => response.text())
            .then(html => {
                tableBody.innerHTML = html;
            })
            .catch(error => console.error('Error:', error));
    });
</script>
